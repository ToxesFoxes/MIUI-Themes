<?xml version="1.0" encoding="utf-8"?>
<Lockscreen frameRate="60" frameRateBatteryLow="20" frameRateCharging="60" screenWidth="1080" version="1">
  <!-- Определение ширины и высоты экрана -->
  <Var expression="#screen_width" name="sw" type="number"/>
  <Var expression="#screen_height" name="sh" type="number"/>
  <!--начало-->
  <Var name="light_scale">
    <VariableAnimation initPause="true" loop="false">
      <AniFrame easeType="QuintEaseOut" time="0" value="1"/>
      <AniFrame easeType="QuintEaseOut" time="400" value="1.2"/>
      <AniFrame time="800" value="1"/>
    </VariableAnimation>
  </Var>
  <Var name="cam_scale">
    <VariableAnimation initPause="true" loop="false">
      <AniFrame easeType="QuintEaseOut" time="0" value="1"/>
      <AniFrame easeType="QuintEaseOut" time="400" value="1.2"/>
      <AniFrame time="800" value="1"/>
    </VariableAnimation>
  </Var>
  <Wallpaper blur="20"/>
  <ExternalCommands>
    <Trigger action="resume">
      <!-- Открыть экран обновить данные записи движения -->
      <BinderCommand command="refresh" name="MiSteps"/>
    </Trigger>
    <Trigger action="init">
      <MethodCommand method="performAction" paramTypes="String" params="'chargeAniAction'" target="chargeAni"/>
    </Trigger>
    <Trigger action="init">
      <MethodCommand method="performAction" paramTypes="String" params="'chargeAniAction'" target="Micharging_chargeAni"/>
    </Trigger>
    <Trigger action="resume">
      <Command target="unlocktext_ani.animation" value="play"/>
      <Command target="unlockalpha_ani.animation" value="play"/>
      <Command target="charge_ani.animation" value="play"/>
    </Trigger>
    <Trigger action="init">
      <VariableCommand expression="1" name="unlockButtonSwitch"/>
    </Trigger>
    <Trigger action="resume,pause">
      <VariableCommand expression="0" name="SLS_moveX"/>
      <VariableCommand expression="0" name="SLS_moveY"/>
      <VariableCommand expression="0" name="SLS_moveA"/>
      <VariableCommand expression="0" name="SLS_moveB"/>
      <AnimationCommand command="play(0,0)" target="SLS_moveAn"/>
      <VariableCommand expression="0" name="SLS_unlockA"/>
      <AnimationCommand command="play(0,0)" target="SLS_unlockAn"/>
      <VariableCommand expression="0" name="SLS_moveX_SW"/>
      <VariableCommand expression="0" name="SLS_moveY_SW"/>
    </Trigger>
  </ExternalCommands>
  <VariableBinders>
    <ContentProviderBinder columns="city_name,publish_time,temperature,temperature_range,description,weather_type,wind,humidity" countName="hasweather" dependency="weather" uri="content://weather/weather" uriFormat="content://weather/daily_weather/%s" uriParas="@city_id">
      <Variable column="weather_type" name="weather_id" type="int"/>
      <Variable column="city_name" name="weather_location" type="string"/>
      <Variable column="temperature" name="weather_temperature" type="string"/>
      <Variable column="temperature" name="weather_temperature" type="int"/>
      <Variable column="temperature_range" name="weather_temperature_range" type="string"/>
      <Variable column="description" name="weather_description" type="string"/>
      <Variable column="wind" name="weather_wind" type="string"/>
      <Variable column="humidity" name="weather_humidity" type="string"/>
      <Variable column="temperature" name="weather_temperature_str" type="string"/>
      <Variable column="wind" name="weather_wind" type="string"/>
      <Variable column="publish_time" name="weather_publish_time" type="long"/>
      <Variable column="weather_type" name="weather_id1" row="1" type="int"/>
      <Variable column="weather_type" name="weather_id2" row="2" type="int"/>
      <Variable column="weather_type" name="weather_id3" row="3" type="int"/>
      <Variable column="tmphighs" name="weather_temphigh1" row="1" type="int"/>
      <Variable column="tmplows" name="weather_templow1" row="1" type="int"/>
      <Variable column="tmphighs" name="weather_temphigh2" row="2" type="int"/>
      <Variable column="tmplows" name="weather_templow2" row="2" type="int"/>
      <Variable column="tmphighs" name="weather_temphigh3" row="3" type="int"/>
      <Variable column="tmplows" name="weather_templow3" row="3" type="int"/>
    </ContentProviderBinder>
    <ContentProviderBinder columns="city_id" name="weather" uri="content://weather/actualWeatherData/1">
      <Variable column="city_id" name="city_id" type="string"/>
    </ContentProviderBinder>
    <ContentProviderBinder columns="aqi,pm25,pm10,so2,no2,pub_time,src,spot" countName="hasweatherinfo" dependency="weather" name="weather_aqi" uriFormat="content://weatherinfo/aqi/%s" uriParas="@city_id">
      <Variable column="aqi" name="aqi" type="int"/>
      <Variable column="pm25" name="pm25" type="int"/>
      <Variable column="pm10" name="pm10" type="int"/>
      <Variable column="so2" name="so2" type="int"/>
      <Variable column="no2" name="no2" type="int"/>
    </ContentProviderBinder>
    <ContentProviderBinder columns="icon,title,content,time,info,subtext,key" countName="hasnotifications" name="data" uri="content://keyguard.notification/notifications">
      <Variable column="icon" name="NoticeIcon0" row="0" type="blob.bitmap"/>
      <Variable column="icon" name="NoticeIcon1" row="1" type="blob.bitmap"/>
      <Variable column="icon" name="NoticeIcon2" row="2" type="blob.bitmap"/>
      <Variable column="icon" name="NoticeIcon3" row="3" type="blob.bitmap"/>
      <Variable column="title" name="NoticeTitle" type="string[]"/>
      <Variable column="content" name="NoticeContent" type="string[]"/>
      <Variable column="time" name="NoticeTime" type="string[]"/>
      <Variable column="key" name="NoticeKey" type="string[]"/>
      <Trigger>
        <AnimationCommand command="play(0,0)" target="NoticeUp"/>
        <AnimationCommand command="play(0,0)" target="NoticeAni"/>
      </Trigger>
    </ContentProviderBinder>
    <!-- 注意：不可卸载 小米健康App -->
    <ContentProviderBinder column="steps,goal,distance,energy,strength_duration,summary" countName="hasSteps" name="MiSteps" uri="content://com.mi.health.provider.main/activity/steps/brief">
      <Variable column="steps" name="MiSteps_steps" type="string"/>
      <Variable column="goal" name="MiSteps_goal" type="string"/>
      <Variable column="distance" name="MiSteps_distance" type="string"/>
      <Variable column="energy" name="MiSteps_energy" type="string"/>
      <Variable column="strength_duration" name="MiSteps_strength_duration" type="string"/>
      <Variable column="summary" name="MiSteps_summary" type="string"/>
    </ContentProviderBinder>
  </VariableBinders>
  <Var expression="eq(#weather_id,0)+eq(#weather_id,1)" name="has_night_icon"/>
  <Var expression="ifelse(#has_night_icon,'_'+not(ge(#hour24,6)*le(#hour24,17)),'')" name="icon_suffix" type="string"/>
  <Var expression="ge(#weather_id,4)*le(#weather_id,11)" name="is_rain"/>
  <Var expression="ge(#weather_id,12)*le(#weather_id,17)" name="is_snow"/>
  <Var expression="ge(#weather_id,18)*le(#weather_id,21)+eq(#weather_id,23)" name="is_dust"/>
  <Var expression="ifelse(isnull(#weather_id),1,gt(#weather_id,24),1,#weather_id)" name="icon_suffixa"/>
  <Var expression="ifelse(#is_rain,4,#is_snow,12,#is_dust,18,#icon_suffixa)" name="icon_index"/>
  <Var expression="(180+50)" name="NoticeSpace" type="number"/>
  <Var expression="int(#touch_x-#touch_begin_x)*#NoticeMoveDown+#NoticeAni" name="NoticeMove"/>
  <Var name="NoticeAni">
    <VariableAnimation initPause="true" loop="false">
      <AniFrame time="0" value="0"/>
      <AniFrame time="100" value="int(#touch_x-#touch_begin_x)"/>
      <AniFrame time="300" value="ifelse(int(#touch_x-#touch_begin_x) }= 300,1080,0)"/>
      <Triggers>
        <Trigger action="end" condition="#NoticeAni == 1080">
          <AnimationCommand command="play" target="NoticeUp"/>
        </Trigger>
      </Triggers>
    </VariableAnimation>
  </Var>
  <Var name="NoticeUp">
    <VariableAnimation initPause="true" loop="false" name="NoticeUpAni">
      <AniFrame time="0" value="0"/>
      <AniFrame time="300" value="1"/>
      <Triggers>
        <Trigger action="end" condition="#NoticeUpAni.current_frame == -1">
          <MultiCommand>
            <IntentCommand action="com.miui.app.ExtraStatusBarManager.action_remove_keyguard_notification" broadcast="true">
              <Extra expression="@NoticeKey[#NoticeDown]" name="com.miui.app.ExtraStatusBarManager.extra_notification_key" type="int"/>
              <Extra expression="0" name="com.miui.app.ExtraStatusBarManager.extra_notification_click" type="int"/>
            </IntentCommand>
          </MultiCommand>
        </Trigger>
      </Triggers>
    </VariableAnimation>
  </Var>
  <Var const="true" name="NoticeIconXYWH" type="number[]" values="167,90,130,130"/>
  <!-- Данные проигрывателя : старт -->
  <ExternalCommands>
    <Trigger action="resume" condition="1">
      <MethodCommand condition="#OddityFullscreenMusic_music_control.music_state" method="performAction" paramTypes="String" params="&apos;nameholder_init_play&apos;" target="OddityFullscreenMusic_music_init"/>
    </Trigger>
    <Trigger action="pause" condition="1">
      <MethodCommand condition="not(#OddityFullscreenMusic_music_control.music_state)" method="performAction" paramTypes="String" params="&apos;OddityFullscreenMusic_ani_play&apos;" target="OddityFullscreenMusic_music_ani"/>
      <VariableCommand expression="0" name="OddityFullscreenMusic_music_visibility"/>
    </Trigger>
  </ExternalCommands>
  <VariableBinders/>
  <!-- 音乐 -->


  <!-- Данные проигрывателя : конец -->
  <Group h="#screen_height" layered="true" w="#screen_width">
    <Wallpaper/>
    <!-- 1 экран -->
    <Group x="#defaultScreen_x" y="#defaultScreen_y/4">
      <!-- Тут должны были быть уведомления -->
      <!-- Виджеты -->
      <Group y="#defaultScreen_y/4">
        <Group x="90" y="250">
          <!-- Заряд и подсчёт шагов -->
          <Group>
            <!-- Кнопка смены заряд/шаги -->
            <Button align="center" alignV="center" h="300" w="300" x="150" y="150">
              <Triggers>
                <Trigger action="up">
                  <VariableCommand expression="!#steps_charge_style" name="steps_charge_style" persist="true"/>
                </Trigger>
              </Triggers>
            </Button>
            <!-- Заряд -->
            <Group visibility="#steps_charge_style == 0" x="0" y="0">
              <Rectangle cornerRadius="50" fillColor="@theme_background_color" h="300" w="300" x="0" y="0"/>
              <Circle align="center" alignV="center" alpha="255*0.5" cap="round" fillColor="#00FFFFFF" r="100" strokeAlign="center" strokeColor="#FFFFFF" weight="20" x="150" y="150"/>
              <Arc align="center" alignV="center" cap="round" close="false" fillColor="#00000000" h="200" startAngle="-90" strokeAlign="center" strokeColor="#FFFFFF" sweep="#battery_level/100*360" w="200" weight="20" x="150" y="150"/>
              <Arc align="center" alignV="center" cap="round" close="false" fillColor="#00000000" h="200" startAngle="-90" strokeAlign="center" strokeColor="#56CC89" sweep="#battery_level/100*360" w="200" weight="20" x="150" y="150" visibility="(#battery_state==1||#battery_state==3)" />
              <Text align="center" alignV="center" color="@theme_text_color" size="40" textExp="#battery_level+'%'" x="150" y="150"/>
              <!-- <Image src="left_screen/battery.png" visibility="(#battery_state==1||#battery_state==3)" x="215" y="425" w="22" h="41"/> -->
            </Group>
            <!-- Подсчет шагов -->
            <Group visibility="#steps_charge_style == 1" x="0" y="0">
              <Rectangle cornerRadius="50" fillColor="@theme_background_color" h="300" w="300" x="0" y="0"/>
              <Circle align="center" alignV="center" alpha="255*0.5" cap="round" fillColor="#00FFFFFF" r="100" strokeAlign="center" strokeColor="#FFFFFF" weight="20" x="150" y="150"/>
              <Arc align="center" alignV="center" cap="round" close="false" fillColor="#00000000" h="200" startAngle="-90" strokeAlign="center" strokeColor="#FFFFFF" sweep="@MiSteps_steps/@MiSteps_goal*360" w="200" weight="20" x="150" y="150"/>
              <Image align="center" alignV="center" src="charge/shoes.png" x="150" y="110"/>
              <Rectangle align="center" alignV="center" alpha="255*0.7" fillColor="#FFFFFF" h="2" w="62" x="150" y="152"/>
              <Text align="center" alignV="center" color="@theme_text_color" size="30" textExp="@MiSteps_steps" x="150" y="174"/>
            </Group>
          </Group>
          <!-- Календарь -->
          <Group h="200" w="300" x="350" y="0">
            <Group visibility="#calendar_style == 0">
              <Rectangle cornerRadius="50" fillColor="@theme_background_color" h="200" w="300" x="0" y="0"/>
              <DateTime align="right" alignV="center" color="@theme_text_color" fontFamily="mitype-clock" format="E" size="90" x="275" y="100"/>
              <Group x="20" y="36">
                <DateTime align="center" alignV="center" color="@theme_text_color" format="dd.MM" size="45" x="64" y="28" w="128"/>
                <DateTime align="center" alignV="center" color="@theme_text_color" format="yyyy" size="45" x="64" y="100" w="128"/>
              </Group>
            </Group>
            <Group visibility="#calendar_style == 1">
              <Rectangle cornerRadius="50" fillColor="@theme_background_color" h="200" w="300" x="0" y="0"/>
              <DateTime color="@theme_text_color" format="EEEE" fontFamily="mitype-clock" size="36" x="22" y="107"/>
              <DateTime color="@theme_text_color" format="dd.MM.yyyy" size="50" x="22" y="43"/>
            </Group>
          </Group>
          <!-- Погода и часы -->
          <Group x="350" y="0">
            <Group visibility="#time_weather_style == 0">
              <!-- Погода -->
              <Group x="350" y="0">
                <Rectangle cornerRadius="50" fillColor="@theme_background_color" h="550" w="230" x="0" y="0"/>
                <Image srcExp="'weather/w_'+ #icon_index+'.png'" x="40" y="20"/>
                <Text align="left" alignV="top" color="@theme_text_color" marqueeSpeed="30" size="40" textExp="@weather_location" w="200" x="15" y="218"/>
                <Text align="left" alignV="top" color="@theme_text_color" marqueeSpeed="30" size="40" textExp="@weather_description" w="200" x="15" y="300"/>
                <Text align="left" alignV="top" color="@theme_text_color" fontFamily="mitype-clock" marqueeSpeed="30" size="80" textExp="@weather_temperature" w="200" x="15" y="410"/>
              </Group>
              <!-- Часы -->
              <Group x="0" y="250">
                <Rectangle cornerRadius="50" fillColor="@theme_background_color" h="300" w="300" x="0" y="0"/>
                <Image src="clock/time_bg.png" x="34" y="34"/>
                <Image align="center" alignV="center" antiAlias="true" centerX="4" centerY="206/2" rotation="#hour12*30+#minute/2" src="clock/h.png" x="150" y="150"/>
                <Image align="center" alignV="center" antiAlias="true" centerX="4" centerY="206/2" rotation="#minute*6+#second/10" src="clock/m.png" x="150" y="150"/>
                <Image align="center" alignV="center" antiAlias="true" centerX="4" centerY="206/2" rotation="#second*6" src="clock/s.png" x="150" y="150"/>
              </Group>
            </Group>
            <Group visibility="#time_weather_style == 1">
              <!-- Погода -->
              <Group x="0" y="250">
                <Rectangle cornerRadius="50" fillColor="@theme_background_color" h="300" w="550" x="0" y="0"/>
                <Image srcExp="'weather/w_'+ #icon_index+'.png'" x="380" y="20"/>
                <Text align="left" alignV="top" color="@theme_text_color" marqueeSpeed="30" size="40" textExp="@weather_location" w="335" x="24" y="90"/>
                <Text align="left" alignV="top" color="@theme_text_color" marqueeSpeed="30" size="45" textExp="@weather_description" w="335" x="24" y="33"/>
                <Text align="right" alignV="top" color="@theme_text_color" fontFamily="mitype-clock" marqueeSpeed="30" size="80" textExp="@weather_temperature" w="250" x="530" y="170"/>
              </Group>
              <!-- Часы -->
              <Group x="350" y="0">
                <Rectangle cornerRadius="50" fillColor="@theme_background_color" h="200" w="200" x="0" y="0"/>
                <Image src="clock/time_bg.png" x="22" y="22" w="155" h="155"/>
                <Image align="center" alignV="center" antiAlias="true" centerX="2" centerY="138/2" rotation="#hour12*30+#minute/2" src="clock/h.png" x="100" y="100" h="138" w="4"/>
                <Image align="center" alignV="center" antiAlias="true" centerX="2" centerY="138/2" rotation="#minute*6+#second/10" src="clock/m.png" x="100" y="100" h="138" w="4"/>
                <Image align="center" alignV="center" antiAlias="true" centerX="2" centerY="138/2" rotation="#second*6" src="clock/s.png" x="100" y="100" h="138" w="4"/>
              </Group>
            </Group>
          </Group>
          <!-- Час -->
          <Group x="0" y="350">
            <Rectangle cornerRadius="50" fillColor="@theme_background_color" h="200" w="300" x="0" y="0"/>
            <DateTime align="center" alignV="center" color="@theme_text_color" fontFamily="mitype-clock" format="HH:mm" size="90" x="149" y="99"/>
          </Group>
        </Group>
      </Group>
    </Group>
    <!-- 2 экран -->
    <!-- <Rectangle alpha="255*0.4*#defaultScreen_x/1080" fillColor="#FFFFFF" h="#sh" w="#sw" x="0" y="0"/> -->
    <Group x="-1080+#defaultScreen_x">
      <!-- Остальной экран -->
      <Group visibility="1">
        <!-- Аватар и текст -->
        <Group x="#sw/2" y="400">
          <Var expression="ifelse(strContains(@theme_avatar_image,'com.android.fileexplorer'),strReplaceAll(@theme_avatar_image,'content://com.android.fileexplorer.myprovider/external_files/','file:///sdcard/'),strContains(@theme_avatar_image,'com.miui.gallery'),strReplaceAll(@theme_avatar_image,'%2F','/'), strContains(@theme_avatar_image,'com.miui.gallery'),strReplaceAll(@theme_avatar_image,'content://com.miui.gallery.open/raw//storage/emulated/0/','file:///sdcard/'),@theme_avatar_image)" name="txdz" type="string"/>
          <!-- Дефолтная картинка -->
          <Image align="center" alignV="center" src="left_screen/youlee.png" x="0" y="0">
            <Mask src="left_screen/mask.png"/>
          </Image>
          <!-- Пользовательское фото -->
          <Image align="center" alignV="center" h="200" srcExp="@txdz" srcType="Uri" w="200" x="0" y="0">
            <Mask src="left_screen/mask.png"/>
          </Image>
          <Text align="center" alignV="center" bold="true" color="@theme_text_color" size="40" textExp="@theme_avatar_label" x="0" y="140"/>
          <!-- Кнопка открытия настроек -->
          <Button align="center" alignV="center" h="200" w="200" x="0" y="0">
            <Pressed>
              <circle align="center" alignV="center" alpha="90" fillColor="@" r="100" x="0" y="0"/>
            </Pressed>
            <Triggers>
              <Trigger action="up" condition="abs(#touch_begin_y-#touch_y){50**abs(#touch_begin_x-#touch_x){50">
                <IntentCommand action="android.intent.action.MAIN" class="miui.maml.MamlConfigSettings" package="com.android.thememanager">
                  <Extra expression="'lockstyle'" name="maml_code" type="string"/>
                </IntentCommand>
                <ExternCommand command="unlock"/>
              </Trigger>
            </Triggers>
          </Button>
        </Group>

        <Group>
          <!--Быстрая оплата-->
          <Image align="center" alignV="center" src="left_screen/wechat.png" x="177" y="800"/>
          <Image align="center" alignV="center" src="left_screen/alipay.png" x="185" y="1020"/>
          <Button align="center" alignV="center" h="180" w="180" x="319" y="800">
            <Normal>
              <Image align="center" alignV="center" alpha="255" src="left_screen/scanner.png" x="319" y="800"/>
            </Normal>
            <Pressed>
              <Image align="center" alignV="center" alpha="255*0.7" src="left_screen/scanner.png" x="319" y="800"/>
            </Pressed>
            <Triggers>
              <Trigger action="up" condition="abs(#touch_begin_y-#touch_y){50**abs(#touch_begin_x-#touch_x){50">
                <ExternCommand command="unlock"/>
                <IntentCommand action="android.intent.action.MAIN" class="com.tencent.mm.plugin.scanner.ui.BaseScanUI" package="com.tencent.mm"/>
              </Trigger>
            </Triggers>
          </Button>
          <Button align="center" alignV="center" h="80" w="80" x="444" y="800">
            <Normal>
              <Image align="center" alignV="center" alpha="255" src="left_screen/wechat_pay.png" x="444" y="802"/>
            </Normal>
            <Pressed>
              <Image align="center" alignV="center" alpha="255*0.7" src="left_screen/wechat_pay.png" x="444" y="802"/>
            </Pressed>
            <Triggers>
              <Trigger action="up" condition="abs(#touch_begin_y-#touch_y){50**abs(#touch_begin_x-#touch_x){50">
                <ExternCommand command="unlock"/>
                <IntentCommand action="android.intent.action.MAIN" class="com.tencent.mm.plugin.offline.ui.WalletOfflineEntranceUI" package="com.tencent.mm"/>
              </Trigger>
            </Triggers>
          </Button>
          <Button align="center" alignV="center" h="80" w="80" x="319" y="1020">
            <Normal>
              <Image align="center" alignV="center" alpha="255" src="left_screen/scanner.png" x="319" y="1020"/>
            </Normal>
            <Pressed>
              <Image align="center" alignV="center" alpha="255*0.7" src="left_screen/scanner.png" x="319" y="1020"/>
            </Pressed>
            <Triggers>
              <Trigger action="up">
                <ExternCommand command="unlock"/>
                <IntentCommand action="android.intent.action.MAIN" class="com.alipay.mobile.scan.as.main.MainCaptureActivity" package="com.eg.android.AlipayGphone"/>
              </Trigger>
            </Triggers>
          </Button>
          <Button align="center" alignV="center" h="80" w="80" x="444" y="1020">
            <Normal>
              <Image align="center" alignV="center" alpha="255" src="left_screen/ali_pay.png" x="444" y="1020"/>
            </Normal>
            <Pressed>
              <Image align="center" alignV="center" alpha="255*0.7" src="left_screen/ali_pay.png" x="444" y="1020"/>
            </Pressed>
            <Triggers>
              <Trigger action="up" condition="abs(#touch_begin_y-#touch_y){50**abs(#touch_begin_x-#touch_x){50">
                <ExternCommand command="unlock"/>
                <IntentCommand action="android.intent.action.MAIN" class="com.eg.android.AlipayGphone.FastStartActivity" package="com.eg.android.AlipayGphone"/>
              </Trigger>
            </Triggers>
          </Button>
          <!--Быстрое применение-->
          <Button align="center" alignV="center" h="150" w="150" x="195" y="1270">
            <Image align="center" alignV="center" h="150" src="left_screen/dialer.png" visibility="eqs(@app1.package,'')*eqs(@app1.class,'')" w="150" x="195" y="1270"/>
            <Image align="center" alignV="center" h="150" srcFormat="%s,%s" srcParas="@app1.package,@app1.class" srcType="ApplicationIcon" w="150" x="195" y="1270">
              <Mask h="150" src="left_screen/dialer.png" w="150" x="195" y="1270"/>
            </Image>
            <Triggers>
              <Trigger action="up">
                <IntentCommand action="android.intent.action.MAIN" class="com.android.contacts.activities.TwelveKeyDialer" id="app1" package="com.android.contacts"/>
                <ExternCommand command="unlock"/>
              </Trigger>
            </Triggers>
            <Pressed/>
          </Button>
          <Button align="center" alignV="center" h="150" w="150" x="425" y="1270">
            <Image align="center" alignV="center" h="150" src="left_screen/message.png" visibility="eqs(@app2.package,'')*eqs(@app2.class,'')" w="150" x="425" y="1270"/>
            <Image align="center" alignV="center" h="150" srcFormat="%s,%s" srcParas="@app2.package,@app2.class" srcType="ApplicationIcon" w="150" x="425" y="1270">
              <Mask h="150" src="left_screen/message.png" w="150" x="425" y="1270"/>
            </Image>
            <Triggers>
              <Trigger action="up">
                <IntentCommand action="android.intent.action.MAIN" class="com.android.mms.ui.MmsTabActivity" id="app2" package="com.android.mms"/>
                <ExternCommand command="unlock"/>
              </Trigger>
            </Triggers>
            <Pressed/>
          </Button>
          <Button align="center" alignV="center" h="150" w="150" x="655" y="1270">
            <Image align="center" alignV="center" h="150" src="left_screen/gallery.png" visibility="eqs(@app3.package,'')*eqs(@app3.class,'')" w="150" x="655" y="1270"/>
            <Image align="center" alignV="center" h="150" srcFormat="%s,%s" srcParas="@app3.package,@app3.class" srcType="ApplicationIcon" w="150" x="655" y="1270">
              <Mask h="150" src="left_screen/gallery.png" w="150" x="655" y="1270"/>
            </Image>
            <Triggers>
              <Trigger action="up">
                <IntentCommand action="android.intent.action.MAIN" class="com.miui.gallery.activity.HomePageActivity" id="app3" package="com.miui.gallery"/>
                <ExternCommand command="unlock"/>
              </Trigger>
            </Triggers>
            <Pressed/>
          </Button>
          <Button align="center" alignV="center" h="150" w="150" x="885" y="1270">
            <Image align="center" alignV="center" h="150" src="left_screen/browser.png" visibility="eqs(@app4.package,'')*eqs(@app4.class,'')" w="150" x="885" y="1270"/>
            <Image align="center" alignV="center" h="150" srcFormat="%s,%s" srcParas="@app4.package,@app4.class" srcType="ApplicationIcon" w="150" x="885" y="1270">
              <Mask h="150" src="left_screen/browser.png" w="150" x="867" y="1270"/>
            </Image>
            <Triggers>
              <Trigger action="up">
                <IntentCommand action="android.intent.action.MAIN" class="com.android.browser.BrowserActivity" id="app4" package="com.android.browser"/>
                <ExternCommand command="unlock"/>
              </Trigger>
            </Triggers>
            <Pressed/>
          </Button>
          <Button align="center" alignV="center" h="200" w="390" x="290" y="1520">
            <Normal>
              <Image align="center" alignV="center" alpha="255" src="left_screen/mijia.png" x="290" y="1520"/>
            </Normal>
            <Pressed>
              <Image align="center" alignV="center" alpha="255*0.7" src="left_screen/mijia.png" x="290" y="1520"/>
            </Pressed>
            <Triggers>
              <Trigger action="up">
                <ExternCommand command="unlock"/>
                <IntentCommand action="android.intent.action.MAIN" class="com.xiaomi.smarthome.SmartHomeMainActivity" package="com.xiaomi.smarthome"/>
              </Trigger>
            </Triggers>
          </Button>
          <Button align="center" alignV="center" h="200" w="200" x="885" y="1520">
            <Normal>
              <Image align="center" alignV="center" alpha="255" src="left_screen/cam.png" x="885" y="1520"/>
            </Normal>
            <Pressed>
              <Image align="center" alignV="center" alpha="255*0.7" src="left_screen/cam.png" x="885" y="1520"/>
            </Pressed>
            <Triggers>
              <Trigger action="up">
                <ExternCommand command="unlock"/>
                <IntentCommand action="android.intent.action.MAIN" class="com.android.camera.Camera" package="com.android.camera"/>
              </Trigger>
            </Triggers>
          </Button>
          <!--Быстрое переключение-->
          <Button align="center" alignV="center" h="150" w="150" x="665" y="784">
            <Image align="center" alignV="center" src="left_screen/ring_off.png" visibility="ifelse(#ring_mode==0,1,0)" x="665" y="784"/>
            <Image align="center" alignV="center" src="left_screen/ring_on.png" visibility="ifelse(#ring_mode}0,1,0)" x="665" y="784"/>
            <Text align="center" alignV="center" color="#FFFFFF" size="30" text="铃声：开" visibility="ifelse(#ring_mode}0,1,0)" x="665" y="875"/>
            <Text align="center" alignV="center" color="#FFFFFF" size="30" text="铃声：关" visibility="ifelse(#ring_mode==0,1,0)" x="665" y="875"/>
            <Triggers>
              <Trigger action="up">
                <Command target="RingMode" value="normal,silent"/>
              </Trigger>
              <Trigger action="down">
                <VariableCommand expression="1" name="noticeDown"/>
              </Trigger>
              <Trigger action="up,cancel">
                <VariableCommand expression="0" name="noticeDown"/>
              </Trigger>
            </Triggers>
          </Button>
          <Button align="center" alignV="center" h="150" w="150" x="885" y="784">
            <Image align="center" alignV="center" src="left_screen/wifi_off.png" visibility="ifelse(#wifi_state==0,1,0)" x="885" y="784"/>
            <Image align="center" alignV="center" src="left_screen/wifi_on.png" visibility="ifelse(#wifi_state}0,1,0)" x="885" y="784"/>
            <Text align="center" alignV="center" color="#FFFFFF" size="30" text="WiFi：开" visibility="ifelse(#wifi_state}0,1,0)" x="885" y="875"/>
            <Text align="center" alignV="center" color="#FFFFFF" size="30" text="WiFi：关" visibility="ifelse(#wifi_state==0,1,0)" x="885" y="875"/>
            <Triggers>
              <Trigger action="up">
                <Command target="Wifi" value="toggle"/>
              </Trigger>
              <Trigger action="down">
                <VariableCommand expression="1" name="noticeDown"/>
              </Trigger>
              <Trigger action="up,cancel">
                <VariableCommand expression="0" name="noticeDown"/>
              </Trigger>
            </Triggers>
          </Button>
          <Button align="center" alignV="center" h="150" w="150" x="665" y="984">
            <Image align="center" alignV="center" src="left_screen/sig_off.png" visibility="ifelse(#data_state==0,1,0)" x="665" y="984"/>
            <Image align="center" alignV="center" src="left_screen/sig_on.png" visibility="ifelse(#data_state}0,1,0)" x="665" y="984"/>
            <Text align="center" alignV="center" color="#FFFFFF" size="30" text="流量：开" visibility="ifelse(#data_state}0,1,0)" x="665" y="1075"/>
            <Text align="center" alignV="center" color="#FFFFFF" size="30" text="流量：关" visibility="ifelse(#data_state==0,1,0)" x="665" y="1075"/>
            <Triggers>
              <Trigger action="up">
                <Command target="Data" value="toggle"/>
              </Trigger>
              <Trigger action="down">
                <VariableCommand expression="1" name="noticeDown"/>
              </Trigger>
              <Trigger action="up,cancel">
                <VariableCommand expression="0" name="noticeDown"/>
              </Trigger>
            </Triggers>
          </Button>
          <Button align="center" alignV="center" h="150" w="150" x="885" y="984">
            <Image align="center" alignV="center" src="left_screen/bluetooth_off.png" visibility="ifelse(#bluetooth_state==0,1,0)" x="885" y="984"/>
            <Image align="center" alignV="center" src="left_screen/bluetooth_on.png" visibility="ifelse(#bluetooth_state}0,1,0)" x="885" y="984"/>
            <Text align="center" alignV="center" color="#FFFFFF" size="30" text="蓝牙：开" visibility="ifelse(#bluetooth_state}0,1,0)" x="885" y="1075"/>
            <Text align="center" alignV="center" color="#FFFFFF" size="30" text="蓝牙：关" visibility="ifelse(#bluetooth_state==0,1,0)" x="885" y="1075"/>
            <Triggers>
              <Trigger action="up">
                <Command target="Bluetooth" value="toggle"/>
              </Trigger>
              <Trigger action="down">
                <VariableCommand expression="1" name="noticeDown"/>
              </Trigger>
              <Trigger action="up,cancel">
                <VariableCommand expression="0" name="noticeDown"/>
              </Trigger>
            </Triggers>
          </Button>
          <Var name="flash_ani">
            <VariableAnimation initPause="true" loop="false">
              <AniFrame easeType="QuintEaseOut" time="0" value="1"/>
              <AniFrame easeType="QuintEaseOut" time="300" value="1.1"/>
              <AniFrame time="600" value="1"/>
            </VariableAnimation>
          </Var>
          <Button align="center" alignV="center" h="200" pivotX="100" pivotY="100" scale="#flash_ani" w="200" x="635" y="1520">
            <Image align="center" alignV="center" src="left_screen/light_off.png" visibility="#lightSwitch==0" x="635" y="1520"/>
            <Image align="center" alignV="center" src="left_screen/light_on.png" visibility="#lightSwitch==1" x="635" y="1520"/>
            <Triggers>
              <Trigger action="up">
                <VariableCommand expression="!(#lightSwitch)" name="lightSwitch"/>
                <IntentCommand action="miui.intent.action.TOGGLE_TORCH" broadcast="true">
                  <Extra expression="ifelse(int(@__miui_version_code)}=8,#lightSwitch,1)" name="miui.intent.extra.IS_ENABLE" type="boolean"/>
                </IntentCommand>
              </Trigger>
              <Trigger action="double">
                <VariableCommand expression="!(#lightSwitch)" name="lightSwitch"/>
                <IntentCommand action="miui.intent.action.TOGGLE_TORCH" broadcast="true">
                  <Extra expression="ifelse(int(@__miui_version_code)}=8,#lightSwitch,1)" name="miui.intent.extra.IS_ENABLE" type="boolean"/>
                </IntentCommand>
              </Trigger>
              <Trigger action="down">
                <VariableCommand expression="0" name="noticeDown"/>
                <AnimationCommand command="play" target="flash_ani"/>
              </Trigger>
            </Triggers>
          </Button>
        </Group>
      </Group>
      <!-- Экран Музыка -->
      <Group>
        <!-- Триггер : запуск анимации -->
        <Group name="OddityFullscreenMusic_music_init">
          <Triggers>
            <Trigger action="nameholder_init_play">
              <VariableCommand expression="1" name="OddityFullscreenMusic_music_visibility"/>
              <Command delay="0" target="OddityFullscreenMusic_music_alpha.animation" value="play(0,600)"/>
              <Command delay="0" target="OddityFullscreenMusic_music_y.animation" value="play(0,800)"/>
              <Command delay="0" target="OddityFullscreenMusic_scale_x.animation" value="play(0,600)"/>
              <Command delay="0" target="OddityFullscreenMusic_scale_y.animation" value="play(0,500)"/>
            </Trigger>
          </Triggers>
        </Group>
        <!-- Кнопка : показать проигрыватель -->
        <Image align="center" alignV="center" src="OddityFullscreenMusic_src/bfq.png" visibility="not(#OddityFullscreenMusic_music_visibility)" x="1019" y="#screen_height-65"/>
        <Button align="center" alignV="center" h="130" visibility="1" w="130" x="1019" y="#screen_height-65">
          <!-- Триггер : видимость проигрывателя -->
          <Triggers>
            <Trigger action="up" condition="not(#OddityFullscreenMusic_music_visibility)">
              <MethodCommand method="performAction" paramTypes="String" params="&apos;nameholder_init_play&apos;" target="OddityFullscreenMusic_music_init"/>
            </Trigger>
          </Triggers>
        </Button>
        <!-- Проигрыватель -->
        <Group visibility="1" x="0" y="0">
          <MusicControl alpha="#OddityFullscreenMusic_music_alpha" autoShow="true" defAlbumCover="OddityFullscreenMusic_src/mb.jpg" enableLyric="true" name="OddityFullscreenMusic_music_control" updateLyricInterval="100" visibility="#OddityFullscreenMusic_music_visibility" y="#OddityFullscreenMusic_music_y">
            <!-- Фон -->
            <Image src="OddityFullscreenMusic_src/b.png"/>
            <!-- Переменные : прозрачность, положение y, разммеры x y -->
            <Group>
              <Var name="OddityFullscreenMusic_music_alpha">
                <VariableAnimation initPause="true" loop="false">
                  <AniFrame easeType="QuadEaseOut" time="0" value="0"/>
                  <AniFrame easeType="CubicEaseOut" time="600" value="255"/>
                  <AniFrame time="900" value="0"/>
                </VariableAnimation>
              </Var>
              <Var name="OddityFullscreenMusic_music_y">
                <VariableAnimation initPause="true" loop="false">
                  <AniFrame easeType="BackEaseOut" time="0" value="-140"/>
                  <AniFrame easeType="CubicEaseOut" time="800" value="0"/>
                  <AniFrame time="1100" value="-140"/>
                </VariableAnimation>
              </Var>
              <Var name="OddityFullscreenMusic_scale_x">
                <VariableAnimation initPause="true" loop="false">
                  <AniFrame easeType="BackEaseOut" time="0" value="0"/>
                  <AniFrame easeType="CubicEaseOut" time="600" value="1"/>
                  <AniFrame time="1100" value="0.5"/>
                </VariableAnimation>
              </Var>
              <Var name="OddityFullscreenMusic_scale_y">
                <VariableAnimation initPause="true" loop="false">
                  <AniFrame easeType="BackEaseOut" time="0" value="0"/>
                  <AniFrame easeType="CubicEaseOut" time="500" value="1"/>
                  <AniFrame time="1000" value="0.5"/>
                </VariableAnimation>
              </Var>
              <Var name="OddityFullscreenMusic_scale_x1">
                <VariableAnimation initPause="true" loop="false">
                  <AniFrame easeType="BackEaseOut" time="0" value="1"/>
                  <AniFrame easeType="CubicEaseOut" time="400" value="1.3"/>
                  <AniFrame time="600" value="1"/>
                </VariableAnimation>
              </Var>
              <Var name="OddityFullscreenMusic_scale_y1">
                <VariableAnimation initPause="true" loop="false">
                  <AniFrame easeType="BackEaseOut" time="0" value="1"/>
                  <AniFrame easeType="CubicEaseOut" time="300" value="1.3"/>
                  <AniFrame time="500" value="1"/>
                </VariableAnimation>
              </Var>
            </Group>
            <!-- Анимация -->
            <Group name="OddityFullscreenMusic_music_ani">
              <!-- Триггер анимации появления элементов - переменные выше -->
              <Triggers>
                <Trigger action="OddityFullscreenMusic_ani_play">
                  <VariableCommand delay="500" expression="0" name="OddityFullscreenMusic_music_visibility"/>
                  <Command delay="0" target="OddityFullscreenMusic_music_alpha.animation" value="play(600,900)"/>
                  <Command delay="0" target="OddityFullscreenMusic_music_y.animation" value="play(800,1100)"/>
                  <Command delay="0" target="OddityFullscreenMusic_scale_x.animation" value="play(600,1100)"/>
                  <Command delay="0" target="OddityFullscreenMusic_scale_y.animation" value="play(500,1000)"/>
                </Trigger>
              </Triggers>
            </Group>
            <!-- Кнопка : возврат -->
            <Group>
              <Image align="center" alignV="center" src="OddityFullscreenMusic_src/fh.png" x="105" y="112+#OddityFullscreenMusic_music_y+ifelse(#raw_screen_height==2244,&apos;30&apos;,#raw_screen_height==2248,&apos;30&apos;,#raw_screen_height==2280,&apos;30&apos;,#raw_screen_height==2340,&apos;30&apos;,&apos;0&apos;)"/>
              <Button align="center" alignV="center" h="130" w="130" x="105" y="112+ifelse(#raw_screen_height==2244,&apos;30&apos;,#raw_screen_height==2248,&apos;30&apos;,#raw_screen_height==2280,&apos;30&apos;,#raw_screen_height==2340,&apos;30&apos;,&apos;0&apos;)">
                <Triggers>
                  <Trigger action="up">
                    <MethodCommand method="performAction" paramTypes="String" params="&apos;OddityFullscreenMusic_ani_play&apos;" target="OddityFullscreenMusic_music_ani"/>
                  </Trigger>
                </Triggers>
              </Button>
            </Group>
            <!-- Кнопка : открыть приложение проигрывателя -->
            <Group>
              <Image align="center" alignV="center" src="OddityFullscreenMusic_src/msz.png" x="975" y="112+#OddityFullscreenMusic_music_y+ifelse(#raw_screen_height==2244,&apos;30&apos;,#raw_screen_height==2248,&apos;30&apos;,#raw_screen_height==2280,&apos;30&apos;,#raw_screen_height==2340,&apos;30&apos;,&apos;0&apos;)"/>
              <Button align="center" alignV="center" h="130" w="130" x="975" y="112+ifelse(#raw_screen_height==2244,&apos;30&apos;,#raw_screen_height==2248,&apos;30&apos;,#raw_screen_height==2280,&apos;30&apos;,#raw_screen_height==2340,&apos;30&apos;,&apos;0&apos;)">
                <Triggers>
                  <Trigger action="up">
                    <!-- <IntentCommand action="android.intent.action.MAIN" package="com.miui.player" class="com.miui.player.phone.ui.MusicSettings" /> -->

                    <IntentCommand action="android.intent.action.MAIN" class="com.miui.player.ui.MusicBrowserActivity" condition="int(@__miui_version_code){=8" package="com.miui.player"/>
                    <IntentCommand action="android.intent.action.MAIN" classExp="@OddityFullscreenMusic_music_control.class" condition="int(@__miui_version_code)}=9" packageExp="@OddityFullscreenMusic_music_control.package"/>
                    <ExternCommand command="unlock"/>
                  </Trigger>
                </Triggers>
              </Button>
            </Group>

            <!-- Обложка -->
            <Group>
              <Image align="center" alignV="center" centerX="460" centerY="460" scaleX="#OddityFullscreenMusic_scale_x" scaleY="#OddityFullscreenMusic_scale_y" src="OddityFullscreenMusic_src/b1.png" x="#screen_width/2" y="239"/>
              <Group align="center" alignV="center" centerX="460" centerY="460" h="920" layered="true" scaleX="#OddityFullscreenMusic_scale_x" scaleY="#OddityFullscreenMusic_scale_y" w="920" x="#screen_width/2" y="718">
                <Image align="center" alignV="center" h="920" srcExp="ifelse(strContains(valueholder_album_config_src,&apos;com.android.fileexplorer&apos;),strReplaceAll(valueholder_album_config_src,&apos;content://com.android.fileexplorer.myprovider/external_files/&apos;,&apos;file:///sdcard/&apos;),strContains(valueholder_album_config_src,&apos;com.miui.gallery&apos;),strReplaceAll(valueholder_album_config_src,&apos;content://com.miui.gallery.open/raw//storage/emulated/0/&apos;,&apos;file:///sdcard/&apos;),valueholder_album_config_src)" srcType="Uri" visibility="len(valueholder_album_config_src)*not(#OddityFullscreenMusic_music_control.music_state)" w="920" x="460" y="460"/>
                <Image align="center" alignV="center" h="920" name="music_album_cover" w="920" x="460" y="460"/>
                <!-- <Image x="460" y="460" w="920" h="920" align="center" alignV="center" src="OddityFullscreenMusic_src/mb.jpg" visibility="not(len(valueholder_album_config_src))*not(#OddityFullscreenMusic_music_control.music_state)" /> -->

                <Image align="center" alignV="center" h="920" src="OddityFullscreenMusic_src/m.9.png" w="920" x="460" xfermode="dst_in" y="460"/>
                <Image align="center" alignV="center" h="920" src="OddityFullscreenMusic_src/mb.9.png" w="920" x="460" y="460"/>
              </Group>
            </Group>

            <!-- Текст песни -->
            <Group clip="true" x="#screen_width/2" y="ifelse(#raw_screen_height==1920,&apos;0&apos;,#raw_screen_height==2040,&apos;-20&apos;,#raw_screen_height==2160,&apos;-41&apos;,#raw_screen_height==2244,&apos;-83&apos;,#raw_screen_height==2248,&apos;-85&apos;,#raw_screen_height==2280,&apos;-101&apos;,&apos;-130&apos;)">
              <Text align="center" alignV="center" color="#b4c2bf" size="50" text="--- 歌词 ---" visibility="not(#OddityFullscreenMusic_music_control.music_state)" y="#screen_height-503"/>
              <Text align="center" alignV="center" alpha="255" color="#b4c2bf" marqueeSpeed="30" size="45" text="@OddityFullscreenMusic_music_control.lyric_last" visibility="#OddityFullscreenMusic_music_control.music_state*ifelse(#raw_screen_height==1920,&apos;0&apos;,&apos;1&apos;)" w="#sw" y="#screen_height-614"/>
              <Text align="center" alignV="center" alpha="255" color="#1ddebc" marqueeSpeed="30" size="50" text="@OddityFullscreenMusic_music_control.lyric_current" visibility="#OddityFullscreenMusic_music_control.music_state" w="#sw" y="#screen_height-540"/>
              <Text align="center" alignV="center" alpha="255" color="#b4c2bf" marqueeSpeed="30" size="45" text="@OddityFullscreenMusic_music_control.lyric_next" visibility="#OddityFullscreenMusic_music_control.music_state" w="#sw" y="#screen_height-466"/>
            </Group>
            <!-- Название -->
            <Group>
              <Text align="center" alignV="center" color="#495150" marqueeSpeed="30" size="50" textExp="ifelse(isnull(@OddityFullscreenMusic_music_control.title),&apos;No music&apos;,@OddityFullscreenMusic_music_control.title)+&apos; - &apos;+ifelse(isnull(@OddityFullscreenMusic_music_control.artist),&apos;Open music player&apos;,@OddityFullscreenMusic_music_control.artist)" visibility="ifelse(#raw_screen_height==1920,&apos;1&apos;,#raw_screen_height==2040,&apos;1&apos;,&apos;0&apos;)" w="#screen_width" x="#screen_width/2" y="1269"/>
              <Text align="center" alignV="center" color="#495150" marqueeSpeed="30" size="50" textExp="ifelse(isnull(@OddityFullscreenMusic_music_control.title),&apos;No music&apos;,@OddityFullscreenMusic_music_control.title)" visibility="ifelse(#raw_screen_height==1920,&apos;0&apos;,#raw_screen_height==2040,&apos;0&apos;,&apos;1&apos;)" w="#screen_width" x="#screen_width/2" y="1269"/>
            </Group>
            <!-- Артист -->
            <Text align="center" alignV="center" color="#495150" marqueeSpeed="30" size="50" textExp="ifelse(isnull(@OddityFullscreenMusic_music_control.artist),&apos;Open music player&apos;,@OddityFullscreenMusic_music_control.artist)" visibility="ifelse(#raw_screen_height==1920,&apos;0&apos;,#raw_screen_height==2040,&apos;0&apos;,&apos;1&apos;)" w="#screen_width" x="#screen_width/2" y="1357"/>
            <!-- Прогресс музыки и время -->
            <Group>
              <Rectangle align="center" alignV="center" alpha="255*40/100" fillColor="#b4c2bf" h="8" w="660" x="#screen_width/2" y="#screen_height-359"/>
              <Rectangle alignV="center" alpha="255" fillColor="#1ddebc" h="8" w="#OddityFullscreenMusic_music_control.music_position/#OddityFullscreenMusic_music_control.music_duration*660" x="#screen_width/2-330" y="#screen_height-359"/>
              <DateTime align="left" alignV="center" alpha="255" color="#b4c2bf" format="mm:ss" size="25" value="#OddityFullscreenMusic_music_control.music_position" x="#screen_width/2-460" y="#screen_height-359"/>
              <DateTime align="right" alignV="center" alpha="255" color="#b4c2bf" format="mm:ss" size="25" value="#OddityFullscreenMusic_music_control.music_duration" x="#screen_width/2+460" y="#screen_height-359"/>
            </Group>

            <Image align="center" alignV="center" centerX="28" centerY="24" scaleX="#OddityFullscreenMusic_scale_x1" scaleY="#OddityFullscreenMusic_scale_y1" src="OddityFullscreenMusic_src/gpqsc.png" srcid="#OddityFullscreenMusic_music_control.user_rating_value" x="107" y="#screen_height-183"/>
            <Button align="center" alignV="center" h="130" w="130" x="107" y="#screen_height-183">
              <Triggers>
                <Trigger action="up">
                  <MethodCommand delay="500" method="ratingHeart" target="OddityFullscreenMusic_music_control"/>
                  <Command target="OddityFullscreenMusic_scale_x1.animation" value="play"/>
                  <Command target="OddityFullscreenMusic_scale_y1.animation" value="play"/>
                </Trigger>
              </Triggers>
            </Button>
            <Image align="center" alignV="center" src="OddityFullscreenMusic_src/bfqfh.png" x="983" y="#screen_height-184"/>
            <Button align="center" alignV="center" h="130" w="130" x="983" y="#screen_height-184">
              <Triggers>
                <Trigger action="up">
                  <MethodCommand method="performAction" paramTypes="String" params="&apos;OddityFullscreenMusic_ani_play&apos;" target="OddityFullscreenMusic_music_ani"/>
                </Trigger>
              </Triggers>
            </Button>
            <Button align="center" alignV="center" h="100" name="music_prev" w="100" x="#screen_width/2-240" y="#screen_height-182">
              <Normal>
                <Image align="center" alignV="center" src="OddityFullscreenMusic_src/music_prev.png" x="#screen_width/2-240" y="#screen_height-182"/>
              </Normal>
              <Pressed>
                <Image align="center" alignV="center" alpha="127" src="OddityFullscreenMusic_src/music_prev.png" x="#screen_width/2-240" y="#screen_height-182"/>
              </Pressed>
            </Button>
            <Button align="center" alignV="center" h="100" name="music_next" w="100" x="#screen_width/2+241" y="#screen_height-183">
              <Normal>
                <Image align="center" alignV="center" src="OddityFullscreenMusic_src/music_next.png" x="#screen_width/2+241" y="#screen_height-183"/>
              </Normal>
              <Pressed>
                <Image align="center" alignV="center" alpha="127" src="OddityFullscreenMusic_src/music_next.png" x="#screen_width/2+241" y="#screen_height-183"/>
              </Pressed>
            </Button>
            <Circle align="center" alignV="center" centerX="#OddityFullscreenMusic_btn_circle.bmp_width/2" centerY="#OddityFullscreenMusic_btn_circle.bmp_height/2" fillColor="#1ddebc" name="OddityFullscreenMusic_btn_circle" r="85" scaleX="#OddityFullscreenMusic_scale_x+#OddityFullscreenMusic_scale_x2" scaleY="#OddityFullscreenMusic_scale_y+#OddityFullscreenMusic_scale_y2" x="#screen_width/2" y="#screen_height-183"/>
            <Var name="OddityFullscreenMusic_scale_x2">
              <VariableAnimation initPause="true" loop="false">
                <AniFrame easeType="BackEaseOut" time="0" value="0"/>
                <AniFrame easeType="CubicEaseOut" time="350" value="0.19"/>
                <AniFrame time="700" value="0"/>
              </VariableAnimation>
            </Var>
            <Var name="OddityFullscreenMusic_scale_y2">
              <VariableAnimation initPause="true" loop="false">
                <AniFrame easeType="BackEaseOut" time="0" value="0"/>
                <AniFrame easeType="CubicEaseOut" time="350" value="0.19"/>
                <AniFrame time="750" value="0"/>
              </VariableAnimation>
            </Var>
            <Button align="center" alignV="center" h="170" name="music_play" w="170" x="#screen_width/2" y="#screen_height-183">
              <Normal>
                <Image align="center" alignV="center" src="OddityFullscreenMusic_src/music_play.png" x="#screen_width/2" y="#screen_height-183"/>
              </Normal>
              <Pressed>
                <Image align="center" alignV="center" alpha="127" src="OddityFullscreenMusic_src/music_play.png" x="#screen_width/2" y="#screen_height-183"/>
              </Pressed>
              <Triggers>
                <Trigger action="up">
                  <Command delay="0" target="OddityFullscreenMusic_scale_x2.animation" value="play(0,800)"/>
                  <Command delay="0" target="OddityFullscreenMusic_scale_y2.animation" value="play(0,600)"/>
                </Trigger>
              </Triggers>
            </Button>
            <Button align="center" alignV="center" h="170" name="music_pause" w="170" x="#screen_width/2" y="#screen_height-183">
              <Normal>
                <Image align="center" alignV="center" src="OddityFullscreenMusic_src/music_pause.png" x="#screen_width/2" y="#screen_height-183"/>
              </Normal>
              <Pressed>
                <Image align="center" alignV="center" alpha="127" src="OddityFullscreenMusic_src/music_pause.png" x="#screen_width/2" y="#screen_height-183"/>
              </Pressed>
              <Triggers>
                <Trigger action="up">
                  <Command delay="0" target="OddityFullscreenMusic_scale_x2.animation" value="play(0,700)"/>
                  <Command delay="0" target="OddityFullscreenMusic_scale_y2.animation" value="play(0,750)"/>
                </Trigger>
              </Triggers>
            </Button>
          </MusicControl>
        </Group>
      </Group>
    </Group>
  </Group>
  <!-- Переменные -->
  <Group>
    <Var expression="max(min(#SLS_moveX+int(#SLS_moveAn),1080),-1080)" name="defaultScreen_x"/>
    <Var expression="#SLS_unlockAn+#SLS_moveY" name="defaultScreen_y"/>
    <Var name="SLS_moveAn">
      <VariableAnimation initPause="true" loop="false">
        <Item easeType="QuartEaseOut" time="0" value="#SLS_moveA"/>
        <Item time="500" value="#SLS_moveB"/>
        <Triggers>
          <Trigger action="end">
            <VariableCommand expression="#SLS_moveB" name="SLS_moveA"/>
            <IntentCommand action="android.intent.action.MAIN" class="com.android.camera.Camera" condition="#SLS_moveAn == -1080" package="com.android.camera">
              <Extra expression="1" name="ShowCameraWhenLocked" type="boolean"/>
              <Extra expression="1" name="StartActivityWhenLocked" type="boolean"/>
            </IntentCommand>
          </Trigger>
        </Triggers>
      </VariableAnimation>
    </Var>
    <!-- Разблокировки отскока -->
    <Var name="SLS_unlockAn">
      <VariableAnimation initPause="true" loop="false">
        <Item easeType="SineEaseOut" time="0" value="#SLS_unlockA"/>
        <Item time="200" value="0"/>
      </VariableAnimation>
    </Var>
    <Var name="SLS_hintAn">
      <VariableAnimation initPause="true" loop="false">
        <Item time="0" value="0"/>
        <Item time="300" value="178"/>
        <Item time="1200" value="178"/>
      </VariableAnimation>
    </Var>
    <Var name="SLS_springingAn">
      <VariableAnimation initPause="true" loop="false">
        <Item easeType="BounceEaseOut" time="0" value="#nameholder_springingA"/>
        <Item time="600" value="0"/>
      </VariableAnimation>
    </Var>
  </Group>
  <!-- Динамическая частота кадров -->
  <FramerateController initPause="true" loop="false" name="SLS_framerateAni">
    <ControlPoint frameRate="60" time="0"/>
    <ControlPoint frameRate="60" time="2000"/>
    <ControlPoint frameRate="30" time="2001"/>
  </FramerateController>
  <Button h="#screen_height" visibility="#unlockButtonSwitch*(#noticeDown==0)" w="1080" x="0" y="0">
    <Triggers>
      <!-- Нажатие : касание -->
      <Trigger action="down">
        <AnimationCommand command="play" target="SLS_framerateAni"/>
      </Trigger>
      <!-- Нажатие : движение -->
      <Trigger action="move">
        <AnimationCommand command="play" condition="#frame_rate { 55" target="SLS_framerateAni"/>
        <MultiCommand condition="#SLS_moveX_SW == 0 ** #SLS_moveY_SW == 0">
          <VariableCommand condition="(#SLS_moveX_SW == 0) ** ((#touch_y-#touch_begin_y) { -50)" expression="1" name="SLS_moveY_SW"/>
          <VariableCommand condition="(#SLS_moveY_SW == 0) ** (abs(#touch_begin_x-#touch_x) } 50)" expression="1" name="SLS_moveX_SW"/>
          <VariableCommand condition="#SLS_moveX_SW" expression="((#touch_x } #touch_begin_x)*2-1)*50" name="nameholder_offsetX"/>
        </MultiCommand>
        <VariableCommand condition="#SLS_moveY_SW" expression="min(0,int(#touch_y-#touch_begin_y+50))" name="SLS_moveY"/>
        <MultiCommand condition="#SLS_moveX_SW">
          <VariableCommand expression="(#touch_begin_y { (#screen_height-(100)*2)+200) ** (int(#SLS_moveAn+#touch_x-(#touch_begin_x+#nameholder_offsetX)) { 0)" name="SLS_leftMoveSW"/>
          <VariableCommand expression="max(-50,#SLS_leftMoveSW*int(#touch_x-#touch_begin_x+50))" name="nameholder_springingA"/>
          <VariableCommand expression="int(#touch_x-(#touch_begin_x+#nameholder_offsetX))" name="SLS_moveX"/>
          <VariableCommand condition="#SLS_leftMoveSW" expression="max(#SLS_moveX,0)" name="SLS_moveX"/>
        </MultiCommand>
      </Trigger>
      <!-- Нажатие : отпускание/отмена -->
      <Trigger action="up,cancel">
        <AnimationCommand command="play" target="SLS_framerateAni"/>
        <!-- Вертикальная разблокировка -->
        <MultiCommand condition="#SLS_moveY_SW">
          <!-- Условие для высоты разблокировки -->
          <ExternCommand command="unlock" condition="#SLS_moveY {= -@unlock_screen_offset_y"/>
          <VariableCommand expression="#SLS_moveY {= -@unlock_screen_offset_y" name="SLS_unlockSW"/>
          <!-- Запустить экран разблокировки -->
          <MultiCommand condition="#SLS_moveY } -@unlock_screen_offset_y">
            <VariableCommand expression="#SLS_moveY" name="SLS_unlockA"/>
            <VariableCommand expression="0" name="SLS_moveY"/>
            <AnimationCommand command="play" target="SLS_unlockAn"/>
          </MultiCommand>
        </MultiCommand>

        <MultiCommand condition="#SLS_moveX_SW">
          <VariableCommand expression="((#touch_x } #touch_begin_x)*2-1)*(abs(#SLS_moveX) } 200)*(#defaultScreen_x { 1080)*(#defaultScreen_x } -1080)" name="SLS_direction"/>
          <MultiCommand condition="#SLS_moveX != 0">
            <VariableCommand expression="#defaultScreen_x" name="SLS_moveA"/>
            <VariableCommand expression="#SLS_moveB+#SLS_direction*1080" name="SLS_moveB"/>
            <VariableCommand expression="0" name="SLS_moveX"/>
            <AnimationCommand command="play" target="SLS_moveAn"/>
          </MultiCommand>
          <MultiCommand condition="#SLS_direction == 0 ** #touch_x { #touch_begin_x">
            <AnimationCommand command="play(1200,0)" target="SLS_hintAn"/>
            <AnimationCommand command="play" target="SLS_springingAn"/>
            <VariableCommand expression="0" name="nameholder_springingA"/>
          </MultiCommand>
        </MultiCommand>
        <VariableCommand expression="0" name="nameholder_offsetX"/>
        <VariableCommand condition="!#SLS_unlockSW" expression="0" name="SLS_moveY_SW"/>
        <VariableCommand expression="0" name="SLS_moveX_SW"/>
      </Trigger>
    </Triggers>
  </Button>
</Lockscreen>